(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ab6c8676"],{"16f9":function(e,t,n){"use strict";n("526a")},"47cb":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("el-row",{staticClass:"cont-row"},[n("el-col",{attrs:{span:24}},[n("aside",[n("span",{staticClass:"text-header"},[n("b",[e._v("Consultas Recurrentes")])])])])],1),e._v(" "),n("el-form",{ref:"modalform",staticClass:"demo-ruleForm",attrs:{model:e.model,rules:e.rulesform,"label-width":"160px","label-position":(e.x.matches,"top")}},[n("el-card",{staticClass:"box-card"},[n("el-row",{attrs:{gutter:20}},e._l(e.domcomponents,(function(t){return n("el-col",{key:t.prop,staticStyle:{border:"0px solid"},attrs:{span:8,xs:24}},[n("el-form-item",{attrs:{prop:t.prop}},["select"===t.type?n("span",[n("el-select",{staticClass:"control-modal",attrs:{filterable:"",placeholder:t.placeholder,clearable:"",disabled:t.disabled},on:{change:function(n){return e.validateSelect(t.prop,n)}},model:{value:e.model[t.prop],callback:function(n){e.$set(e.model,t.prop,n)},expression:"model[component.prop]"}},[n("span",e._l(e.datacontrol[t.prop],(function(e){return n("el-option",{key:e.value,attrs:{label:e.option,value:e.value}})})),1)])],1):e._e()])],1)})),1)],1),e._v(" "),n("el-card",{staticStyle:{"margin-top":"1%"}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",attrs:{border:"",fit:"","highlight-current-row":"",data:e.tableData},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",align:"center"}}),e._v(" "),e._l(e.tableColumns,(function(t){return n("el-table-column",{key:t.label,attrs:{label:t.label,prop:t.prop,align:"center",width:t.width},scopedSlots:e._u([{key:"default",fn:function(n){return[e._v("\n            "+e._s(n.row[t.prop])+"\n          ")]}}],null,!0)})}))],2)],1),e._v(" "),n("el-card",{staticStyle:{"text-align":"left","margin-top":"1%"}},[n("el-form-item",[n("el-button",{staticClass:"btn-exec",attrs:{type:"success"},on:{click:function(t){return e.handleForm("modalform")}}},[e._v("Ejecutar")])],1)],1)],1)],1)},a=[],o=n("b85c"),i=(n("96cf"),n("1da1")),l={domItem:[{type:"select",prop:"servicio",label:"Servicio",placeholder:"Seleccione un servicio",disabled:!1},{type:"select",prop:"consulta",label:"Consulta",placeholder:"Seleccione una consulta",disabled:!1},{type:"select",prop:"idempresa",label:"Empresa",placeholder:"Seleccione una empresa",disabled:!1},{type:"select",prop:"ano",label:"Año",placeholder:"Seleccione un año",disabled:!1},{type:"select",prop:"mes",label:"Mes",placeholder:"Seleccione un mes",disabled:!1}],rulesFormItem:{servicio:[{required:!0,message:"Seleccione un servicio",trigger:"change"}],consulta:[{required:!0,message:"Seleccione una consulta",trigger:"change"}],idempresa:[{required:!0,message:"Seleccione una empresa",trigger:"change"}],ano:[{required:!0,message:"Seleccione un año",trigger:"change"}],mes:[{required:!0,message:"Seleccione un mes",trigger:"change"}]},dataFormItem:{servicio:[],consulta:[],idempresa:[],ano:[],mes:[]},tableColumns:[{label:"Id",prop:"id_detalle",width:50},{label:"Detalle",prop:"desc_det_consulta"},{label:"Procedimiento BD",prop:"procedimiento"}],tableData:[{desc_det_consulta:"Sin Agrupamiento",id_detalle:11,procedimiento:"SP_CONS_VENTAS_CILINDROS"},{desc_det_consulta:"Sin Agrupamiento",id_detalle:10,procedimiento:"SP_CONS_VENTAS_DISTRIBUCION"}]},c=n("b775");function s(){return Object(c["a"])({url:"/servicio",method:"get"})}function u(e){return Object(c["a"])({url:"/consulta",method:"get",params:{servicio_id:e}})}function d(e){return Object(c["a"])({url:"/consulta_detalle",method:"get",params:{category_id:e}})}function p(e){return Object(c["a"])({url:"/empresa",method:"get",params:{servicio_id:e}})}var m={data:function(){return{model:{servicio:"",consulta:"",idempresa:"",ano:"",mes:""},domcomponents:l.domItem,datacontrol:l.dataFormItem,rulesform:l.rulesFormItem,tableColumns:l.tableColumns,loading:!1,multipleSelection:[],tableData:[],x:""}},created:function(){this.x=window.matchMedia("(max-width: 800px)"),this.getAllServicios(),this.getAnios(),this.getMes()},methods:{handleSelectionChange:function(e){this.multipleSelection=e},validateSelect:function(e,t){if("servicio"===e&&(this.model.consulta="",this.model.idempresa="",this.getConsultaServicio(t),this.getEmpresas(t)),"consulta"!==e)return 0;this.getDetalleCategoria(t)},getAnios:function(){this.datacontrol.ano=[];for(var e=2013;e<=2022;e++)this.datacontrol.ano.unshift({value:e,option:e})},getMes:function(){this.datacontrol.mes=[];for(var e=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],t=0;t<e.length;t++)this.datacontrol.mes.push({value:t+1,option:e[t]})},getAllServicios:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s().then((function(e){t.datacontrol.servicio=e}));case 2:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),getConsultaServicio:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u(t).then((function(e){n.datacontrol.consulta=e}));case 2:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),getDetalleCategoria:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d(t).then((function(e){n.tableData=e}));case 2:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),getEmpresas:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p(t).then((function(e){n.datacontrol.idempresa=e}));case 2:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),getShortexecution:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n="".concat("recurrentes/consultas/api","/shortexecution?procedimiento=").concat(t.procedimiento,"&ano=").concat(this.model.ano,"&mes=").concat(this.model.mes,"&idempresa=").concat(this.model.idempresa,"&idconsulta=").concat(t.id_detalle),window.open(n,"_self");case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleForm:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$refs[t].validate((function(e){if(e)if(n.multipleSelection.length){var t,r=0,a=Object(o["a"])(n.multipleSelection);try{for(a.s();!(t=a.n()).done;){var i=t.value;setTimeout(n.getShortexecution,1e3*r,i),r+=1}}catch(l){a.e(l)}finally{a.f()}}else n.$message({message:"Seleccione al menos un registro de la tabla",type:"warning"})}));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleCancel:function(){this.$refs["modalform"].resetFields()}}},h=m,f=(n("16f9"),n("70f8"),n("2877")),g=Object(f["a"])(h,r,a,!1,null,"57cb4208",null);t["default"]=g.exports},"526a":function(e,t,n){},"70f8":function(e,t,n){"use strict";n("a838")},a838:function(e,t,n){}}]);